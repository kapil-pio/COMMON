Fix
Analyze this RPGLE program and fix all validation and runtime issues.
Preserve business logic and explain changes.


Review
Review this CLLE program for operational risks, error handling, and best practices.


Documentation
Generate technical documentation for this RPGLE program for audit and handover.





Refactor
Refactor this RPG code to modern free-format RPG.
Keep business logic unchanged and explain improvements.





Test Cases




Agent mode 

Create a new reusable RPGLE package based on this discount and order calculation logic.
 
The package should include:
1. A service program that encapsulates discount and tax calculation logic
2. A prototype or copy member for external programs
3. Binder source for the service program
4. A sample calling RPGLE program that uses the package
5. Basic test scenarios to validate calculations
6. Technical documentation explaining usage and business rules
 
Requirements:
- Preserve the existing business intent
- Standardize discount rules with a clear maximum cap
- Keep tax logic region-aware
- Follow modern free-format RPG best practices
- Explain the structure and purpose of each artifact created